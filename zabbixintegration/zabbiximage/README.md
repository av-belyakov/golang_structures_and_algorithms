# Zabbix image

## Порядок разворачивания контейнеров с zabbix-server, zabbix-web, zabbix-agent и СУБД postgres

### СУБД Postgres

Что бы развернуть сервер СУБД Postgres с использованием TLS необходимо сначало сгенерировать ключи и сертификаты для сервера, для этого выполняем скрипт _gen-certs.sh_ от имени root, так как на ряду с созданием сертификато данный скрипт ещё выполняет изменение пользователя-владельца для некоторых файлов.

```bash
sudo ./gen-certs.sh
```

После этого появится директория _certs_ с TLS сертификатами и ключами для сервера и клиентов.

### Разворачивание всей инфраструктуры

Выполнить:

```bash
docker compose up -d
docker ps --format 'table {{.ID}}\t{{.Image}}\t{{.Names}}\t{{.RunningFor}}\t{{.Status}}'
```

### Web-интерфейс Zabbix

Для того что бы получить доступк к UI zabbix-web нужно перейти по URL http://localhost:8282. Учётные данные, по умолчанию, для доступа логин пользователя _Admin_, пароль _zabbix_.

#### Настройка некоторых элементов Web-интерфейса

Для некоторых действия с API необходимы повышенные привилегии пользователя вплодь до супер-пользователя. К таким дейсвиям относятся 'hostgroup.create', 'host.create', 'hostgroup.delete', 'host.delete', и т.д. При этом даже права супер-пользователя для работы с API несколько ограничены. Что бы расширить их необходимо явно добавить необходимые действия.

![пример настройки роли](/zabbixintegration/zabbiximage/img/image1.png)
